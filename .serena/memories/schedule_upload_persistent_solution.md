# スケジュールアップロードの永続化ソリューション

## 実装完了内容

### 1. サーバー側の変更 (sftp-server.js)
- `/api/save-temp-file`: ファイルを一時保存するAPI
  - ファイルにユニークIDを付与
  - 24時間の有効期限を設定
  - メタデータをJSONファイルで管理
  
- `/api/upload-temp-file`: 保存済みファイルを使用したアップロードAPI
  - fileIdを使用してファイルを取得
  - 有効期限チェック
  - SFTP/FTP両対応
  
- 自動クリーンアップ機能
  - 1時間ごとに期限切れファイルを削除

### 2. フロントエンド側の変更 (index.html)
- スケジュール作成時
  - ファイルをサーバーに事前アップロード
  - tempFileIdをタスクに保存
  
- スケジュール実行時
  - tempFileIdがある場合は保存済みファイルを使用
  - ない場合は従来のファイルオブジェクトを使用

## 利点
1. ページリロード後もスケジュール実行可能
2. ブラウザを閉じても実行可能
3. 24時間以内であれば確実に実行
4. ファイルの重複アップロードを防止

## 制限事項
- ファイルの保存期間は24時間
- サーバーのディスク容量に依存
- 大量のスケジュールには注意が必要