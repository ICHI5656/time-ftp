# データ保持期間の延長（2ヶ月）

## 実装内容

### 1. サーバー側一時ファイル保存（sftp-server.js）
- **保存期間**: 24時間 → 60日（約2ヶ月）に延長
- **クリーンアップ**: 1時間ごと → 24時間ごと（1日1回）に変更
- 期限切れファイルのみ自動削除

### 2. フロントエンド（index.html）
- **LocalStorage保持期間**: 2ヶ月以上古い完了/失敗タスクを自動削除
- **フィルタリング条件**:
  - 完了済み（completed）または失敗（failed）のタスク
  - 2ヶ月以上前のものは自動削除
  - 待機中（waiting）のタスクは保持

### 3. メリット
- 長期のスケジュール設定が可能（最大2ヶ月先）
- 過去の実行履歴を長期保管
- ディスク容量を考慮した自動クリーンアップ

## 設定値

```javascript
// サーバー側（sftp-server.js）
expiresAt: new Date(Date.now() + 60 * 24 * 60 * 60 * 1000) // 60日

// クリーンアップ間隔
setInterval(() => {...}, 24 * 60 * 60 * 1000); // 24時間ごと

// フロントエンド（index.html）
const twoMonthsAgo = new Date();
twoMonthsAgo.setMonth(twoMonthsAgo.getMonth() - 2);
```

## 注意事項
- サーバー再起動後に有効
- ディスク容量に注意（大量ファイルの場合）
- LocalStorageの容量制限（約10MB）に注意